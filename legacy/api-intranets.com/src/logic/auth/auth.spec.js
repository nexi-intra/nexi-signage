const auth = require('.');
describe('Authentication', async () => {
test("getTokenForMSAL", async() => {
    var access_token = "eyJ0eXAiOiJKV1QiLCJub25jZSI6IkFRQUJBQUFBQUFDNXVuYTBFVUZnVElGOEVsYXh0V2pUeWhxM1draXkwOV9XdnotVjAyV3RHSlhDeVRQQzBTRHJJa1M4X2VYUERIV19WQXU1T19wQUZuR2Fuc3R3X0xjMFd6Q3lnLWNyeUpfWHdtTnZXRkFwaENBQSIsImFsZyI6IlJTMjU2IiwieDV0IjoibmJDd1cxMXczWGtCLXhVYVh3S1JTTGpNSEdRIiwia2lkIjoibmJDd1cxMXczWGtCLXhVYVh3S1JTTGpNSEdRIn0.eyJhdWQiOiJodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb20iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9kZjk2YjhjOS01MWExLTQwY2YtYjhiMS00NTE0YmU4ZTk2NjgvIiwiaWF0IjoxNTQ0OTgyNjQwLCJuYmYiOjE1NDQ5ODI2NDAsImV4cCI6MTU0NDk4NjU0MCwiYWNjdCI6MCwiYWNyIjoiMSIsImFpbyI6IjQyUmdZSmlsT0QxbVpTZnZuMktOaG9ETmovV0YzMi9yY0pIVS9IcGFLWUhadi8xOCt4VUEiLCJhbXIiOlsicHdkIl0sImFwcF9kaXNwbGF5bmFtZSI6Ikp1bXB0bzM2NSIsImFwcGlkIjoiNWE0NzM1NTctYTlkMy00Mzc4LTkwZjEtZTljZDNhMzgwMDZmIiwiYXBwaWRhY3IiOiIwIiwiZmFtaWx5X25hbWUiOiJKb2hhbnNlbiIsImdpdmVuX25hbWUiOiJOaWVscyBHcmVnZXJzIiwiaXBhZGRyIjoiODAuMTYwLjEyNi4yNTQiLCJuYW1lIjoiTmllbHMgR3JlZ2VycyBKb2hhbnNlbiAtIGp1bXB0bzM2NS5jb20iLCJvaWQiOiI1OGQwMmVlNS1hZjgwLTRmODEtYjE0NC0xNzM0Yjc3YzAyYzkiLCJwbGF0ZiI6IjUiLCJwdWlkIjoiMTAwM0JGRkQ5Q0VCNzY2NSIsInB3ZF9leHAiOiI4OTE3OCIsInB3ZF91cmwiOiJodHRwczovL3BvcnRhbC5taWNyb3NvZnRvbmxpbmUuY29tL0NoYW5nZVBhc3N3b3JkLmFzcHgiLCJzY3AiOiJGaWxlcy5SZWFkIEZpbGVzLlJlYWRXcml0ZSBNYWlsLlJlYWQgb3BlbmlkIHByb2ZpbGUgVXNlci5SZWFkIGVtYWlsIiwic2lnbmluX3N0YXRlIjpbImlua25vd25udHdrIiwia21zaSJdLCJzdWIiOiJZYUtzMmxweFpnTFJNRlFOczFna2U4TmVsekZuaFVjMTJCbi0zZXU0ZkFvIiwidGlkIjoiZGY5NmI4YzktNTFhMS00MGNmLWI4YjEtNDUxNGJlOGU5NjY4IiwidW5pcXVlX25hbWUiOiJuaWVsc0BqdW1wdG8zNjUuY29tIiwidXBuIjoibmllbHNAanVtcHRvMzY1LmNvbSIsInV0aSI6IllZbGJBdjRZemtLR0dOR2x5UlVqQUEiLCJ2ZXIiOiIxLjAiLCJ4bXNfc3QiOnsic3ViIjoib3cta3k0ZXh0MTlBUk84OVRJSGVnOWJMdmpJbDZrYnZhSFBGY1VjZnU1dyJ9LCJ4bXNfdGNkdCI6MTQ4MjAwMDExOH0.WeLqPoA2MJd0xGawYc5Nzke2tZJCl8eZT7LByniUeiqTJtTGr7wLneWZwBFuoy1p3qgq04Rv6F-fi3mV77clp0PHOl2nmeJEjGX0g_oz2-TSW__Jf7KC474cxsi-9gXLtR1vfrONAoj8r2iTZFVC8Ub9hlElrR3pxRnru4VhrcRIAsv3QfnoayEbsYnAeBZyACh0SsmjfwksPpY-E2bKmNqlkWEd-0XEztHpnBahAEhUr-oZzb-Z0HqMx4EH2j9Y-R3yFEpNXxBjmN73ypCZ-VgpDUDidhhIs2hCZYBAamk-GLvNp1EX4rbinx3rfRdUy3FlDpr16DLUkZds5__J9w&token_type=Bearer&expires_in=3599&scope=openid+profile+email+https%3a%2f%2fgraph.microsoft.com%2fFiles.Read+https%3a%2f%2fgraph.microsoft.com%2fFiles.ReadWrite+https%3a%2f%2fgraph.microsoft.com%2fMail.Read+https%3a%2f%2fgraph.microsoft.com%2fUser.Read&client_info=eyJ1aWQiOiI1OGQwMmVlNS1hZjgwLTRmODEtYjE0NC0xNzM0Yjc3YzAyYzkiLCJ1dGlkIjoiZGY5NmI4YzktNTFhMS00MGNmLWI4YjEtNDUxNGJlOGU5NjY4In0&state=38dfd092-b9e9-4a2e-aa54-1edeee8f237c&session_state=d01bc055-aa23-479f-8efc-eede737e5a98"
    var result = await auth.getTokenForMSAL(access_token)
    
     expect(result.hasError).toBeFalsy();
     
     var result2 = await auth.getClaimsForToken(result.token)
     expect(result2.pto.upn).toBe("niels@jumpto365.com");

})
})